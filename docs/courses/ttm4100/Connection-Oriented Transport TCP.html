<!DOCTYPE html>
<html>
  <head>
    <!-- Katex -->
    <link rel="stylesheet" href=
        "https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"/>

    <!-- GitHub Markdown Styles -->
    <link rel="stylesheet" href=
        "https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css"/>

    <title>Connection-Oriented Transport TCP.md</title>
    <link rel="icon" type="image/x-icon" href="../../"/>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="../../styles.css">
  
  </head>

  <body class="markdown-body">
    <div class="page flex-row">
      <div class="col">
        
<p><h4><a href="../index.html">courses/</a><a href="./index.html">ttm4100</a>
</h4></p>
<ul>
<li>ðŸ“‚ <a href="./assets/index.html">assets</a></li>
<li>ðŸ“„ <a href="5G Cellular Networks.html">5G Cellular Networks</a></li>
<li>ðŸ“„ <a href="Application Layer.html">Application Layer</a></li>
<li>ðŸ“„ <a href="calc.ipynb">calc</a></li>
<li>ðŸ“„ <a href="Cellular Networks 4G and 5G.html">Cellular Networks 4G and 5G</a></li>
<li>ðŸ“„ <a href="Computer Networks and the Internet.html">Computer Networks and the Internet</a></li>
<li>ðŸ“„ <a href="Connection-Oriented Transport TCP.html">Connection-Oriented Transport TCP âœ¨</a></li>
<li>ðŸ“„ <a href="Connectionless Transport UDP.html">Connectionless Transport UDP</a></li>
<li>ðŸ“„ <a href="Delay, Loss, and Throughput in Packet-Switched Networks.html">Delay, Loss, and Throughput in Packet-Switched Networks</a></li>
<li>ðŸ“„ <a href="DNS - The Internet's Directory Service.html">DNS - The Internet's Directory Service</a></li>
<li>ðŸ“„ <a href="Electronic Mail in the Internet.html">Electronic Mail in the Internet</a></li>
<li>ðŸ“„ <a href="Error-Detection and -Correction Techniques.html">Error-Detection and -Correction Techniques</a></li>
<li>ðŸ“„ <a href="Evolution of Transport-Layer Functionality.html">Evolution of Transport-Layer Functionality</a></li>
<li>ðŸ“„ <a href="History of Computer Networking and the Internet.html">History of Computer Networking and the Internet</a></li>
<li>ðŸ“„ <a href="ICMP The Internet Control Message Protocol.html">ICMP The Internet Control Message Protocol</a></li>
<li>ðŸ“„ <a href="Introduction to the Control Plane in the Network Layer.html">Introduction to the Control Plane in the Network Layer</a></li>
<li>ðŸ“„ <a href="Introduction to the Link %25Layer.html">Introduction to the Link %Layer</a></li>
<li>ðŸ“„ <a href="Introduction to the Transport Layer and Transport Layer Services.html">Introduction to the Transport Layer and Transport Layer Services</a></li>
<li>ðŸ“„ <a href="Introduction to Wireless and Mobile Networks.html">Introduction to Wireless and Mobile Networks</a></li>
<li>ðŸ“„ <a href="Message Integrity and Digital Signatures.html">Message Integrity and Digital Signatures</a></li>
<li>ðŸ“„ <a href="Multimedia Networking Applications.html">Multimedia Networking Applications</a></li>
<li>ðŸ“„ <a href="Multimedia Networking.html">Multimedia Networking</a></li>
<li>ðŸ“„ <a href="Multiple Access Links and Protocols.html">Multiple Access Links and Protocols</a></li>
<li>ðŸ“„ <a href="Multiplexing and Demultiplexing in the Transport Layer.html">Multiplexing and Demultiplexing in the Transport Layer</a></li>
<li>ðŸ“„ <a href="Network-Layer Security IPsec and Virtual Private Networks.html">Network-Layer Security IPsec and Virtual Private Networks</a></li>
<li>ðŸ“„ <a href="Networks Under Attack.html">Networks Under Attack</a></li>
<li>ðŸ“„ <a href="Operational Security Firewalls and Intrusion Detection Systems.html">Operational Security Firewalls and Intrusion Detection Systems</a></li>
<li>ðŸ“„ <a href="Overview of Network Layer.html">Overview of Network Layer</a></li>
<li>ðŸ“„ <a href="Peer-to-Peer File Distribution.html">Peer-to-Peer File Distribution</a></li>
<li>ðŸ“„ <a href="Principles of Congestion Control.html">Principles of Congestion Control</a></li>
<li>ðŸ“„ <a href="Principles of Cryptography.html">Principles of Cryptography</a></li>
<li>ðŸ“„ <a href="Principles of Network Applications.html">Principles of Network Applications</a></li>
<li>ðŸ“„ <a href="Principles of Reliable Data Transfer.html">Principles of Reliable Data Transfer</a></li>
<li>ðŸ“„ <a href="Protocol Layers and Their Service Models.html">Protocol Layers and Their Service Models</a></li>
<li>ðŸ“„ <a href="protocol.html">protocol</a></li>
<li>ðŸ“„ <a href="Protocols for Real-Time Conversational Applications.html">Protocols for Real-Time Conversational Applications</a></li>
<li>ðŸ“„ <a href="Routing Algorithms.html">Routing Algorithms</a></li>
<li>ðŸ“„ <a href="Securing E-mail.html">Securing E-mail</a></li>
<li>ðŸ“„ <a href="Securing TCP Connections TLS.html">Securing TCP Connections TLS</a></li>
<li>ðŸ“„ <a href="Security in Computer Networks.html">Security in Computer Networks</a></li>
<li>ðŸ“„ <a href="Socket Programming Creating Network Applications.html">Socket Programming Creating Network Applications</a></li>
<li>ðŸ“„ <a href="Streaming Stored Video.html">Streaming Stored Video</a></li>
<li>ðŸ“„ <a href="Switched Local Area Networks.html">Switched Local Area Networks</a></li>
<li>ðŸ“„ <a href="TCP Congestion Control.html">TCP Congestion Control</a></li>
<li>ðŸ“„ <a href="The Internet Protocol IP IPv4 Addressing IPv6 and More.html">The Internet Protocol IP IPv4 Addressing IPv6 and More</a></li>
<li>ðŸ“„ <a href="The Link Layer and LANs.html">The Link Layer and LANs</a></li>
<li>ðŸ“„ <a href="The Network Core.html">The Network Core</a></li>
<li>ðŸ“„ <a href="The Network Edge.html">The Network Edge</a></li>
<li>ðŸ“„ <a href="The Network Layer Control Plane.html">The Network Layer Control Plane</a></li>
<li>ðŸ“„ <a href="The Network Layer Data Plane.html">The Network Layer Data Plane</a></li>
<li>ðŸ“„ <a href="The Web and HTTP.html">The Web and HTTP</a></li>
<li>ðŸ“„ <a href="Transport Layer.html">Transport Layer</a></li>
<li>ðŸ“„ <a href="Video Streaming and Content Distribution Networks.html">Video Streaming and Content Distribution Networks</a></li>
<li>ðŸ“„ <a href="Voice-over-IP.html">Voice-over-IP</a></li>
<li>ðŸ“„ <a href="What is Network Security.html">What is Network Security</a></li>
<li>ðŸ“„ <a href="What is the Internet.html">What is the Internet</a></li>
<li>ðŸ“„ <a href="What's Inside a Router.html">What's Inside a Router</a></li>
<li>ðŸ“„ <a href="WiFi 802.11 Wireless LANs.html">WiFi 802.11 Wireless LANs</a></li>
<li>ðŸ“„ <a href="Wireless and Mobile Networks.html">Wireless and Mobile Networks</a></li>
<li>ðŸ“„ <a href="Wireless Links and Network Characteristics.html">Wireless Links and Network Characteristics</a></li>
</ul>
<p><h4>Table of Contents</h4></p>
<nav class="table-of-contents"><ol><li><a href="#connection-oriented-transport-tcp">Connection-Oriented Transport TCP</a><ol><li><a href="#connection-oriented-transport%3A-tcp">Connection-Oriented Transport: TCP</a><ol><li><a href="#the-tcp-connection">The TCP Connection</a></li><li><a href="#tcp-segment-structure">TCP Segment Structure</a><ol><li><a href="#sequence-numbers-and-acknowledgment-numbers">Sequence Numbers and Acknowledgment Numbers</a></li><li><a href="#telnet%3A-a-case-study-for-sequence-and-acknowledgment-numbers">Telnet: A Case Study for Sequence and Acknowledgment Numbers</a></li></ol></li><li><a href="#round-trip-time-estimation-and-timeout">Round-Trip Time Estimation and Timeout</a><ol><li><a href="#estimating-the-round-trip-time">Estimating the Round-Trip Time</a></li><li><a href="#setting-and-managing-the-retransmission-timeout-interval">Setting and Managing the Retransmission Timeout Interval</a></li></ol></li><li><a href="#reliable-data-transfer">Reliable Data Transfer</a></li><li><a href="#a-few-interesting-scenarios">A Few Interesting Scenarios</a></li><li><a href="#doubling-the-timeout-interval">Doubling the Timeout Interval</a><ol><li><a href="#fast-retransmit">Fast Retransmit</a></li><li><a href="#go-back-n-or-selective-repeat%3F">Go-Back-N or Selective Repeat?</a></li></ol></li><li><a href="#flow-control">Flow Control</a></li><li><a href="#tcp-connection-management">TCP Connection Management</a></li></ol></li></ol></li></ol></nav>
      </div>
      <article class="col content">
        
<h1 id="connection-oriented-transport-tcp" tabindex="-1">Connection-Oriented Transport TCP</h1>
<h2 id="connection-oriented-transport%3A-tcp" tabindex="-1">Connection-Oriented Transport: TCP</h2>
<p>In order to provide reliable data transfer, TCP relies on many of the underlying principles discussed in the previous section, including error detection, retransmissions, cumulative acknowledgments, timers, and header fields for sequence and acknowledgment numbers</p>
<h3 id="the-tcp-connection" tabindex="-1">The TCP Connection</h3>
<p>TCP is said to be connection-oriented because before one application process can begin to send data to another, the two processes must first "handshake" with each other.</p>
<p>TCP protocol runs only in the end systems and not in the intermediate network elements (routers and link-layer switches), the intermediate network elements do not maintain TCP connection state.</p>
<p>A TCP connection provides a full-duplex service: If there is a TCP connection between Process A on one host and Process B on another host, then application-layer data can flow from Process A to Process B at the same time as application-layer data flows from Process B to Process A.</p>
<p>A TCP connection is also always point-to-point, that is, between a single sender and a single receiver. So-called "multicasting" - the transfer of data from one sender to many receivers in a single send operation - is not possible with TCP.</p>
<p>The process that is initiating the connection is called the client process, while the other process is called the server process.</p>
<p>TCP directs this data to the connectionâ€™s send buffer, which is one of the buffers that is set aside during the initial three-way handshake. From time to time, TCP will grab chunks of data from the send buffer and pass the data to the network layer.</p>
<p>The maximum amount of data that can be grabbed and placed in a segment is limited by the maximum segment size (MSS). The MSS is typically set by first determining the length of the largest link-layer frame that can be sent by the local sending host (the so-called maximum transmission unit, MTU), and then setting the MSS to ensure that a TCP segment (when encapsulated in an IP datagram) plus the TCP/IP header length (typically 40 bytes) will fit into a single link-layer frame.</p>
<p><img src="assets/2022-05-04-18-52-37.png" alt=""></p>
<h3 id="tcp-segment-structure" tabindex="-1">TCP Segment Structure</h3>
<p><img src="assets/2022-05-04-18-53-23.png" alt=""></p>
<h4 id="sequence-numbers-and-acknowledgment-numbers" tabindex="-1">Sequence Numbers and Acknowledgment Numbers</h4>
<p>The sequence number for a segment is the byte-stream number of the first byte in the segment.</p>
<p>The acknowledgment number that Host A puts in its segment is the sequence number of the next byte Host A is expecting from Host B.</p>
<p>Because TCP only acknowledges bytes up to the first missing byte in the stream, TCP is said to provide cumulative acknowledgments.</p>
<h4 id="telnet%3A-a-case-study-for-sequence-and-acknowledgment-numbers" tabindex="-1">Telnet: A Case Study for Sequence and Acknowledgment Numbers</h4>
<p>Note that the acknowledgment for client-to-server data is carried in a segment carrying server-to-client data; this acknowledgment is said to be piggybacked on the server-to-client data segment</p>
<h3 id="round-trip-time-estimation-and-timeout" tabindex="-1">Round-Trip Time Estimation and Timeout</h3>
<h4 id="estimating-the-round-trip-time" tabindex="-1">Estimating the Round-Trip Time</h4>
<p>SampleRTT, for a segment is the amount of time between when the segment is sent (that is, passed to IP) and when an acknowledgment for the segment is received. EstimatedRTT is a weighted average of the SampleRTT values:</p>
<p>EstimatedRTT = (1 â€“ Î±) * EstimatedRTT + Î± * SampleRTT</p>
<p>The recommended value of Î± is Î± = 0.125. In addition to having an estimate of the RTT, it is also valuable to have a measure of the variability of the RTT. DevRTT is an estimate of how much SampleRTT typically deviates from EstimatedRTT:</p>
<p>DevRTT = (1 â€“ Î²) * DevRTT + Î² * | SampleRTT â€“ EstimatedRTT |</p>
<p>The recommended value of Î² is 0.25.</p>
<h4 id="setting-and-managing-the-retransmission-timeout-interval" tabindex="-1">Setting and Managing the Retransmission Timeout Interval</h4>
<p>TCPâ€™s method for determining the retransmission timeout interval:</p>
<p>TimeoutInterval = EstimatedRTT + 4 # DevRTT</p>
<p>An initial TimeoutInterval value of 1 second is recommended.</p>
<h3 id="reliable-data-transfer" tabindex="-1">Reliable Data Transfer</h3>
<p>TCP creates a reliable data transfer service on top of IPâ€™s unreliable best effort service.</p>
<p>there are three major events related to data transmission and retransmission in the TCP sender: data received from application above; timer timeout; and ACK receipt.</p>
<ol>
<li>TCP receives data from the application, encapsulates the data in a segment, and passes the segment to IP.</li>
<li>TCP responds to the timeout event by retransmitting the segment that caused the timeout. TCP then restarts the timer.</li>
<li>TCP compares the ACK value y with its variable SendBase. SendBaseâ€“1 is the sequence number of the last byte that has been received correctly and in order at the receiver.</li>
</ol>
<h3 id="a-few-interesting-scenarios" tabindex="-1">A Few Interesting Scenarios</h3>
<h3 id="doubling-the-timeout-interval" tabindex="-1">Doubling the Timeout Interval</h3>
<p>Each time TCP retransmits, it sets the next timeout interval to twice the previous value, This modification provides a limited form of congestion control.</p>
<h4 id="fast-retransmit" tabindex="-1">Fast Retransmit</h4>
<p>When a segment is lost, this long timeout period forces the sender to delay resending the lost packet, thereby increasing the end-to-end delay. Fortunately, the sender can often detect packet loss well before the timeout event occurs by noting so-called duplicate ACKs.</p>
<p>Since TCP does not use negative acknowledgments, the receiver cannot send an explicit negative acknowledgment back to the sender. Instead, it simply reacknowledges (that is, generates a duplicate ACK for) the last in-order byte of data it has received.</p>
<p>If the TCP sender receives three duplicate ACKs for the same data, it takes this as an indication that the segment following the segment that has been ACKed three times has been lost. In the case that three duplicate ACKs are received, the TCP sender performs a fast retransmit, retransmitting the missing segment before that segmentâ€™s timer expires.</p>
<p><img src="assets/2022-05-05-19-39-55.png" alt=""></p>
<h4 id="go-back-n-or-selective-repeat%3F" tabindex="-1">Go-Back-N or Selective Repeat?</h4>
<p>TCPâ€™s error-recovery mechanism is probably best categorized as a hybrid of GBN and SR protocols.</p>
<h3 id="flow-control" tabindex="-1">Flow Control</h3>
<p>TCP provides a flow-control service to its applications to eliminate the possibility of the sender overflowing the receiverâ€™s buffer.</p>
<p>TCP provides flow control by having the sender maintain a variable called the receive window. Informally, the receive window is used to give the sender an idea of how much free buffer space is available at the receiver.</p>
<p>From time to time, the application process in Host B reads from the buffer. Host B tells Host A how much spare room it has in the connection buffer by placing its current value of rwnd in the receive window field of every segment it sends to A. Initially, Host B sets rwnd = RcvBuffer.</p>
<p>The TCP specification requires Host A to continue to send segments with one data byte when Bâ€™s receive window is zero.</p>
<h3 id="tcp-connection-management" tabindex="-1">TCP Connection Management</h3>
<p><img src="assets/2022-05-05-19-48-21.png" alt=""></p>
<p><img src="assets/2022-05-05-19-48-36.png" alt=""></p>
<p><img src="assets/2022-05-05-19-49-22.png" alt=""></p>

      </article>
      </div>
  </body>
</html>
