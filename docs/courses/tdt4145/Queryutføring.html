<!DOCTYPE html>
<html>
  <head>
    <!-- Katex -->
    <link rel="stylesheet" href=
        "https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">

    <!-- GitHub Markdown Styles -->
    <link rel="stylesheet" href=
        "https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css"/>

    <title>QueryutfÃ¸ring.md</title>
    <link rel="icon" type="image/x-icon" href="../../">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="../../styles.css">
  
  </head>

  <body class="markdown-body">
    <div class="page flex-row">
      <div class="links">
        <p></p>
<h4><a href="../index.html">courses/</a><a href="./index.html">tdt4145</a></h4>
<ul>
<li>ğŸ“‚ <a href="./assets/index.html">assets</a></li>
<li>ğŸ“„ <a href="Boka.html">Boka</a></li>
<li>ğŸ“„ <a href="Datamodellering.html">Datamodellering</a></li>
<li>ğŸ“„ <a href="Del 2.html">Del 2</a></li>
<li>ğŸ“„ <a href="Indekser.html">Indekser</a></li>
<li>ğŸ“„ <a href="Lagring.html">Lagring</a></li>
<li>ğŸ“„ <a href="Normalisering.html">Normalisering</a></li>
<li>ğŸ“„ <a href="Queryutf%C3%B8ring.html">QueryutfÃ¸ring âœ¨</a></li>
<li>ğŸ“„ <a href="Relasjonsalgebra.html">Relasjonsalgebra</a></li>
<li>ğŸ“„ <a href="Relasjonsdatabaser.html">Relasjonsdatabaser</a></li>
<li>ğŸ“„ <a href="SQL.html">SQL</a></li>
<li>ğŸ“„ <a href="Transaksjoner.html">Transaksjoner</a>
</li>
</ul>

      </div>
      <article class="content">
        <h1>QueryutfÃ¸ring</h1>
<h2>QueryutfÃ¸ring</h2>
<p>Algoritmer for queryprosessering og
optimalisering, kap. 18 + notat</p>
<h3>Fra Query til resultat (18.1)</h3>
<p><img src="assets/Pasted image 20220414114355.png" alt=""></p>
<h3>Teknikker for Ã¥ utfÃ¸re relasjonsalgebraoperasjoner (18.3)</h3>
<ul>
<li>Indeksering: Bruk WHERE-uttrykk til Ã¥ trekke ut smÃ¥ mengder poster (seleksjon, join)</li>
<li>Iterasjon: Ofte er det raskest Ã¥ scanne hele tabeller</li>
<li>Partisjonering: Sortering og hashing av input gir operasjoner pÃ¥ mindre datamengder</li>
<li>NTNU er kjent som pionerer pÃ¥ hashbaserte metoder (partisjonering). Kjell Bratbergsengen, VLDB 1984.</li>
</ul>
<h3>Statistikk om data</h3>
<ul>
<li>For hver tabell
<ul>
<li>antall rader</li>
<li>antall blokker</li>
</ul>
</li>
<li>For hver indeks
<ul>
<li>antall nÃ¸kkelverdier</li>
<li>antall blokker</li>
<li>Histogrammer</li>
</ul>
</li>
<li>For hvert B+-tre
<ul>
<li>TrehÃ¸yde</li>
<li>LowKey</li>
<li>HighKey</li>
<li>antall blokker</li>
</ul>
</li>
</ul>
<h3>Aksessvei (18.3)</h3>
<ul>
<li>Access path / search method (E &amp; N)</li>
<li>Optimalisatoren velger den billigste aksessveien</li>
<li>MÃ¥les i antall blokker som aksesseres (+ CPU-bruk)</li>
<li>
<ol>
<li><strong>Filscan (tabellscan)</strong></li>
</ol>
</li>
<li>
<ol start="2">
<li><strong>Indeks</strong>
â€“ Indeksscan
â€“ Rangescan
â€“ Indeks lookup</li>
</ol>
</li>
</ul>
<h3>Optimalisatortre</h3>
<p><img src="assets/Pasted image 20220414115026.png" alt=""></p>
<h3>Bruk explain i MySQL</h3>
<ul>
<li>MySQL leser tabellene i den gitte rekkefÃ¸lgen</li>
<li>ALL: Full table scan</li>
</ul>
<p><img src="assets/Pasted image 20220414115352.png" alt=""></p>
<h3>Flettesortering (18.2)</h3>
<ul>
<li>Merge-sort: Sortering av store datamengder</li>
<li>2 faser</li>
</ul>
<p><img src="assets/Pasted image 20220414115537.png" alt=""></p>
<h3>Flettesortering (2)</h3>
<ol>
<li>Partisjonering
â€“ Sorterer deler (partisjoner) som fÃ¥r plass i RAM
<ul>
<li>Antall deler (partisjoner): nR</li>
<li>Antall blokker av data: b</li>
<li>Tilgjengelige buffer: nB</li>
</ul>
</li>
<li>Fletting
â€“ Flett sammen sorterte delfiler i et antall pass
â€“ Flettegrad dM â€“ antall delfiler som kan flettes i hvert pass
â€“ Flettepass â€“ antall pass som filene mÃ¥ flettes i</li>
</ol>
<ul>
<li>Regner ut total I/O â€“ antall blokker som leses/skrives</li>
</ul>
<h3>Metoder for enkle seleksjoner (18.3.1)</h3>
<ul>
<li>LineÃ¦rt filscan (S1)</li>
<li>Bruk B+-tre eller hashindeks (clustered index) (S5)</li>
<li>Bruk sekundÃ¦rindeks (unclustered index) (S6)</li>
</ul>
<h3>Metoder for utfÃ¸ring av join (18.4.1)</h3>
<ul>
<li>J1: Nested-loop join
â€“ For hver blokk i den ene tabellen
<ul>
<li>Scan hele den andre tabellen og se etter match</li>
</ul>
</li>
<li>J2: Single-loop join (index nested loop)
<ul>
<li>Loop gjennom den ene tabellen og bruk en indeks for Ã¥ slÃ¥ opp i den andre</li>
</ul>
</li>
<li>J3: Sort-merge join:
<ul>
<li>Hvis begge tabellene er sorterte pÃ¥ joinattributtene, kan vi bare flette de</li>
<li>Hvis ikke, kan de sorteres fÃ¸rst, og sÃ¥ flettes</li>
</ul>
</li>
<li>J4: Partition-hash join
<ul>
<li>Partisjoner tabellene ved hashing pÃ¥ joinattributtene</li>
<li>FÃ¥r mange smÃ¥ partisjoner som kan joines parvis i RA</li>
</ul>
</li>
</ul>

      </article>
      </div>
  </body>
</html>
